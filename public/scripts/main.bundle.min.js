(()=>{"use strict";const t="terms-container",e=(t,e,n)=>{const a=12*n,r=e/1200;return t*r*Math.pow(1+r,a)/(Math.pow(1+r,a)-1)},n=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),a={getElement:t=>{const e=document.createElement("div");e.classList.add("results",document.body.classList.contains("light")?"light":"dark");const a=n();for(const[n,r]of Object.entries(t)){const t=document.createElement("div");t.classList.add("results-item");const l=document.createElement("span");l.classList.add("result-span","left"),l.textContent=n;const o=document.createElement("span");o.classList.add("result-span","right","bold"),o.textContent=a.format(r),t.append(l,o),e.appendChild(t)}return e},render:t=>{if(t){const t=document.getElementById("results-container");t&&t.append(a.getElement())}}},r={getElement:t=>{const e=document.createElement("div");return e.classList.add("content-header","light-mode"),e.innerText=t,e},render:(e=t)=>{const n=document.getElementById(e);n&&n.append(r.getElement())}},l={getElement:(t=[1,2,3])=>{const e=document.createElement("div");e.classList.add("overflow-table");const a=document.createElement("table");if(Array.isArray(t)&&t.length){const r=document.createElement("tr"),l=document.createElement("th"),o=document.createElement("th"),s=document.createElement("th"),c=document.createElement("th"),d=document.createElement("th"),i=document.createElement("th"),m=document.createElement("th");l.textContent="Year",o.textContent="Month",s.textContent="Interest",c.textContent="Principal",d.textContent="Balance",i.textContent="Total Interest",m.textContent="Total Principal",r.append(l,o,s,c,d,i,m),a.appendChild(r);const u=n();let g=!1;t.forEach((t=>{const n=document.createElement("tr");!g&&t.totalInterest<t.totalPrincipal&&(n.classList.add("bd-bottom-green"),g=!0);const r=document.createElement("td");r.textContent=t.year;const l=document.createElement("td");l.textContent=t.month;const o=document.createElement("td");o.textContent=u.format(t.interest);const s=document.createElement("td");s.textContent=u.format(t.principal);const c=document.createElement("td");c.textContent=u.format(t.balance);const d=document.createElement("td");d.classList.add("grey-border-left","grey-bg"),d.textContent=u.format(t.totalInterest);const i=document.createElement("td");i.classList.add("grey-border-right","grey-bg"),i.textContent=u.format(t.totalPrincipal),n.append(r,l,o,s,c,d,i),a.appendChild(n),e.appendChild(a)})),(t=>{const e=document.querySelectorAll(`.${t}`);for(const n of e)n.classList.remove(t)})("d-none")}return e},render:t=>{if(t){const e=document.getElementById(t);e&&e.append(l.getElement())}}},o={getChartElementContainer:()=>{const t=document.createElement("cavnas");return t.classList.add("m-auto","h-300"),t.id="chart-container",t},render:t=>{const e=document.getElementById("visual-container");e.removeChild(e.firstChild),e.prepend(r.getElement("Visualization"));document.getElementById("chart-container")&&(e.lastChild&&(e.removeChild(e.lastChild),e.appendChild(o.getChartElementContainer())),Chart.getChart("chart-container")&&Chart.getChart("chart-container").destroy(),new Chart(document.getElementById("chart-container"),{type:"doughnut",data:{labels:["Interest","Principal"],datasets:[{label:"My First Dataset",data:t,backgroundColor:["rgb(243, 196, 219)","rgb(196, 243, 220)"],hoverOffset:4}]},options:{plugins:{tooltip:{callbacks:{label:function(t){return console.log(t),`${t.label||""}: ${n().format(t.parsed)}`}}}}}}))}};let s=!1,c=!1,d=!1;const i={loadEventListeners:()=>{},submitHandler:t=>{t.preventDefault();const n=document.getElementById("terms-container");n.classList.contains("m-auto")&&(n.classList.remove("m-auto"),n.classList.add("m-15"));const s=document.getElementById("loanAmount").value,c=document.getElementById("interestRate").value,d=document.getElementById("loanTerm").value;if(s&&c&&d){const t=e(s,c,d),n=((t,e,n,a)=>{const r=12*a,l=n/1200;let o=0,s=0;for(let n=0;n<=r;n++)s+=e*l,o=t-e*l,e-=o;return s})(t,s,c,d),i=((t,e)=>Number(t)+Number(e))(s,n),m={"Monthly Payment":t,"Total Interest":n,"Total Amount Paid":i};console.log(m,"resObject");const u=document.getElementById("results-container");for(;u.hasChildNodes();)u.removeChild(u.lastChild);u.appendChild(r.getElement("Payment Results")),u.appendChild(a.getElement(m));const g=document.getElementById("schedule-container");for(;g.hasChildNodes();)g.removeChild(g.lastChild);g.append(r.getElement("Amortization Schedule"));const h=((t,n,a)=>{const r=e(t,n,a);let l=0,o=0,s=0,c=0;const d=n/1200,i=[];for(let e=1;e<=a;e++)for(let n=1;n<=12;n++)l=t*d,s+=l,o=r-l,c+=o,t-=o,i.push({year:e,month:n,interest:l,principal:o,balance:t,totalInterest:s,totalPrincipal:c});return i})(s,c,d);g.appendChild(l.getElement(h));const p=h[h.length-1];setTimeout((()=>{o.render([p.totalInterest,p.totalPrincipal])}),150),console.log(h)}},getInput:(t,e,n="text",a=!1)=>{const r=document.createElement("div");r.classList.add("form-input");const l=document.createElement("label");l.textContent=t;const o=document.createElement("input");return o.type=n,o.name=e,o.id=e,o.onkeyup=((t,e=350)=>{let n;return(...a)=>{clearTimeout(n),n=setTimeout((()=>{t(...a)}),e)}})((t=>{"loanAmount"==e?s=!!o.value:"interestRate"==e?c=!!o.value:"loanTerm"==e&&(d=!!o.value),s&&c&&d&&i.submitHandler(t)}),550),a&&(o.required=!0),r.appendChild(l),r.appendChild(o),r},getElement:()=>{const{getInput:t}=i,e=document.createElement("form");e.classList.add("loan-form");const n=t("Loan Amount:","loanAmount","number",!0),a=t("Interest Rate (%):","interestRate","number",!0),r=t("Loan Term (years):","loanTerm","number",!0);n.focus=!0,e.appendChild(n),e.appendChild(a),e.appendChild(r);const l=document.createElement("input");return l.classList.add("btn","teal","lighten-3"),l.type="submit",l.value="Calculate",l.onclick=t=>i.submitHandler(t),e.appendChild(l),{element:e,callback:t=>{setTimeout((()=>{loanAmount.focus()}),100)}}},render:(e=t)=>{const n=document.getElementById(e);if(n){const{element:t,callback:e}=i.getElement(n);n.appendChild(t),e&&e()}}},m={currentPage:1,totalPages:2,render:(e=t)=>{const n=[],{currentPage:a,totalPages:l}=m,o=document.getElementById(e);if(o){o.append(r.getElement("Loan Terms"));const{element:t,callback:e}=i.getElement(o);return e&&n.push(e),o.appendChild(t),n}}};let u=!0;const g={toggleMode:t=>{setTimeout((t=>{u=!u,u?(t=>{const e=document.querySelector("body"),n=document.querySelectorAll(".content-header"),a=document.querySelectorAll(".container"),r=document.querySelectorAll(".results"),l=document.getElementById("top-bar");e&&e.classList.contains("dark")&&(e.style.backgroundColor="var(--light-grey-bg)",e.classList.remove("dark"),e.classList.add("light")),l&&l.classList.contains("dark")&&(l.classList.remove("dark","dark-header-bg","dark-header-txt"),l.classList.add("light","light-header-bg","light-header-txt")),n&&n[0].classList.contains("dark")&&n.forEach((t=>{t.classList.contains("dark")&&(t.classList.remove("dark"),t.classList.remove("dark","dark-header-bg","dark-header-txt"),t.classList.add("light","light-header-bg","light-header-txt"))})),a&&a[0].classList.contains("dark")&&a.forEach((t=>{t.classList.contains("dark")&&(t.classList.remove("dark","dark-container-bg","dark-container-txt","dark-container-border"),t.classList.add("light","light-container-bg","light-container-txt","light-container-border"))})),r&&r.length&&r[0]&&r.forEach((t=>{t.classList.contains("dark")&&(t.classList.remove("dark","dark-results-bg","dark-results-txt","dark-results-border"),t.classList.add("light","light-results-bg","light-results-txt","light-results-border"))}))})():(t=>{const e=document.querySelector("body"),n=document.querySelectorAll(".content-header"),a=document.querySelectorAll(".container"),r=document.querySelectorAll(".results"),l=document.getElementById("top-bar");e&&e.classList.contains("light")&&(e.style.backgroundColor="var(--dark-bg)",e.classList.remove("light"),e.classList.add("dark")),l&&l.classList.contains("light")&&(l.classList.remove("light","light-header-bg","light-header-txt"),l.classList.add("dark","dark-header-bg","dark-header-txt")),n&&n.length&&n[0].classList.contains("light")&&n.forEach((t=>{t.classList.contains("light")&&(t.classList.remove("light","light-header-bg","light-header-txt"),t.classList.add("dark","dark-header-bg","dark-header-txt"))})),a&&a.length&&a[0].classList.contains("light")&&a.forEach((t=>{t.classList.contains("light")&&(t.classList.remove("light","light-container-bg","light-container-txt","light-container-border"),t.classList.add("dark","dark-container-bg","dark-container-txt","dark-container-border"))})),r&&r.length&&r[0]&&r.forEach((t=>{t.classList.contains("light")&&(t.classList.remove("light","light-results-bg","light-results-txt","light-results-border"),t.classList.add("dark","dark-results-bg","dark-results-txt","dark-results-border"))}))})()}),100)},getElement:()=>{const t=document.createElement("div");t.classList.add("top-bar");const e=document.createElement("h1");e.textContent="MortiSmart";const n=document.createElement("div");n.id="toggle-container";const a=document.createElement("i");a.id="toggle",a.classList.add("light-mode","toggle","fa-regular","fa-sun"),n.onclick=t=>{g.toggleMode(t)};const r=document.createElement("label");return r.classList.add("switch"),r.innerHTML=' <input id="toggle-input" type="checkbox"><span class="slider round"></span>',r.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation();const e=document.getElementById("toggle-input");e.checked=!e.checked,g.toggleMode(t)})),n.appendChild(r),t.appendChild(e),t.appendChild(n),t},render:(t="top-bar")=>{const e=document.getElementById(t);e&&e.append(g.getElement())}},h={getElement:()=>{const t=document.createElement("div");return t.classList.add("footer"),t},render:(t="footer")=>{const e=document.getElementById(t);e&&e.append(h.getElement())}};(t=>{const{topBar:e,footer:n,ui:a}=t;e.render(),n.render();const r=a.render();r&&r.forEach((t=>{"function"==typeof t&&t()}))})({topBar:g,ui:{render:(e=t)=>{if(document.getElementById(e))return m.render()}},footer:h})})();